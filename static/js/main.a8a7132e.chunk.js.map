{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","services/img-api.js","components/SearchBar/SearchBar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","App.js","index.js","components/SearchBar/SearchBar.module.css"],"names":["module","exports","axios","defaults","baseURL","params","key","orientation","image_type","per_page","imagesApi","searchQuery","currentPage","get","q","page","then","response","data","hits","SearchBar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","styles","Searchbar","SearchForm","this","type","SearchForm__button","SearchForm__buttonLabel","SearchForm__input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","largeImage","tags","alt","data-url","ImageGalleryItem__image","defaultProps","ImageGallery","list","onClick","map","id","webformatURL","largeImageURL","modalRoot","document","querySelector","Modal","handleKeyDown","event","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","images","isLoading","error","showModal","imageModal","onChangeQuery","fetchImages","option","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","openModal","nodeName","console","log","dataset","url","closeModal","prevProps","showLoadMoreBtn","length","Button","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a8a7132e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1mQFm\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__RRFBU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1tcfb\",\"Modal\":\"Modal_Modal__2rd5Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3MOWH\",\"Button\":\"App_Button__4Lhs9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__2NzZa\"};","import axios from \"axios\";\r\n\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"19892329-0452805ee0827a1229c764d7c\";\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\naxios.defaults.params = {\r\n  key: API_KEY,\r\n  orientation: \"horizontal\",\r\n  image_type: \"photo\",\r\n  per_page: 12,\r\n};\r\nconst imagesApi = ({ searchQuery = \"\", currentPage = 1 }) => {\r\n  return axios\r\n    .get(\"\", { params: { q: searchQuery, page: currentPage } })\r\n    .then((response) => response.data.hits);\r\n};\r\nexport { imagesApi };\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./SearchBar.module.css\";\r\n\r\nclass SearchBar extends Component {\r\n  state = { query: \"\" };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.SearchForm__button}>\r\n            <span className={styles.SearchForm__buttonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchForm__input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchBar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SearchBar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\nconst ImageGalleryItem = ({ src, largeImage, tags }) => {\r\n  return (\r\n    <>\r\n      <img\r\n        src={src}\r\n        alt={tags}\r\n        data-url={largeImage}\r\n        className={styles.ImageGalleryItem__image}\r\n      />\r\n    </>\r\n  );\r\n};\r\nImageGalleryItem.defaultProps = {\r\n  alt: \"Фото\",\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  dataUrl: PropTypes.string,\r\n};\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport ImageGalleryItem from \"../ImageGalleryItem/\";\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ list, onClick }) => (\r\n  <ul className={styles.ImageGallery} onClick={onClick}>\r\n    {list.map(({ id, webformatURL, largeImageURL, tags }) => {\r\n      return (\r\n        <li className={styles.ImageGalleryItem} key={id}>\r\n          <ImageGalleryItem\r\n            src={webformatURL}\r\n            tags={tags}\r\n            largeImage={largeImageURL}\r\n          />\r\n        </li>\r\n      );\r\n    })}\r\n  </ul>\r\n);\r\nImageGallery.propTypes = {\r\n  list: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n  };\r\n\r\n  handleKeyDown = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={styles.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport { imagesApi } from \"./services/img-api\";\nimport SearchBar from \"./components/SearchBar/SearchBar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport Modal from \"./components/Modal/Modal\";\nimport styles from \"./App.module.css\";\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: \"\",\n    isLoading: false,\n    error: null,\n    showModal: false,\n    imageModal: \"\",\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n  onChangeQuery = (query) => {\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const option = {\n      searchQuery,\n      currentPage,\n    };\n    this.setState({ isLoading: true });\n    imagesApi(option)\n      .then((hits) => {\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n  openModal = (event) => {\n    if (event.target.nodeName === \"IMG\") {\n      console.log(event.target.dataset.url);\n      this.setState({\n        imageModal: event.target.dataset.url,\n        showModal: true,\n      });\n    }\n  };\n\n  closeModal = (event) => {\n    this.setState({\n      imageModal: \"\",\n      showModal: false,\n    });\n  };\n\n  render() {\n    const { images, isLoading, error, imageModal, showModal } = this.state;\n    const showLoadMoreBtn = images.length > 0 && !isLoading;\n\n    return (\n      <div className={styles.App}>\n        <SearchBar onSubmit={this.onChangeQuery} />\n        {error && <h2>Ошибка!</h2>}\n\n        <ImageGallery list={images} onClick={this.openModal} />\n        {showModal && (\n          <Modal onClose={this.closeModal}>\n            <img src={imageModal} alt=\"\" />\n          </Modal>\n        )}\n        {isLoading && <h1>Загружаем...</h1>}\n        {showLoadMoreBtn && (\n          <button\n            className={styles.Button}\n            type=\"button\"\n            onClick={this.fetchImages}\n          >\n            Загрузить ещё\n          </button>\n        )}\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__2cFpZ\",\"SearchForm\":\"SearchBar_SearchForm__3e1Yr\",\"SearchForm__button\":\"SearchBar_SearchForm__button__3eX3u\",\"SearchForm__buttonLabel\":\"SearchBar_SearchForm__buttonLabel__2No30\",\"SearchForm__input\":\"SearchBar_SearchForm__input__wZAfD\"};"],"sourceRoot":""}